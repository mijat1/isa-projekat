{"ast":null,"code":"var _jsxFileName = \"E:\\\\aca\\\\isa\\\\nova-isa-projekat\\\\isa2021\\\\isa-projekat\\\\ISA-front\\\\src\\\\Pages\\\\ComplaintUserPage.js\";\nimport React, { Component } from \"react\";\nimport Axios from \"axios\";\nimport ComplaintImage from \"../Images/report.png\";\nimport Header from '../Components/Header';\nimport GetAuthorisation from \"../Funciton/GetAuthorisation\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:8080\";\n\nclass ComplaintUserPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      complaints: [],\n      ownerName: \"\",\n      complaintId: \"\",\n      showComplaintModal: false\n    };\n\n    this.handleReplyChange = event => {\n      this.setState({\n        reply: event.target.value\n      });\n    };\n\n    this.handleReplyToUserChange = event => {\n      this.setState({\n        replyTo: event.target.value\n      });\n    };\n\n    this.handleComplaintModalClose = () => {\n      this.setState({\n        showComplaintModal: false\n      });\n    };\n\n    this.handleReplyComaplaint = () => {\n      console.log(this.state.reply);\n      console.log(this.state.replyTo);\n      console.log(this.state.complaintId);\n      let ComplaintUnitDTO = {\n        unitId: this.state.complaintId,\n        reply: this.state.reply,\n        replyToUser: this.state.replyTo\n      };\n\n      if (this.state.reply === \"\" || this.state.replyTo === \"\") {\n        alert(\"Morate uneti odgovore\");\n      } else {\n        Axios.post(API_URL + \"/complaint/replyToUnitComplaint\", ComplaintUnitDTO, {\n          validateStatus: () => true,\n          headers: {\n            Authorization: GetAuthorisation()\n          }\n        }).then(resp => {\n          if (resp.status === 500) {\n            this.setState({\n              hiddenFailAlert: false,\n              failHeader: \"Internal server error\",\n              failMessage: \"Server error.\"\n            });\n          } else if (resp.status === 201) {\n            Axios.get(API_URL + \"/complaint/getComplaintsUnit\", {\n              validateStatus: () => true,\n              headers: {\n                Authorization: GetAuthorisation()\n              }\n            }).then(res => {\n              if (res.status === 401) {\n                this.props.history.push('/login');\n              } else {\n                this.setState({\n                  complaints: res.data\n                });\n                console.log(res.data);\n              }\n            }).catch(err => {\n              console.log(err);\n            });\n          }\n\n          this.setState({\n            showComplaintModal: false\n          });\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    };\n\n    this.handleReplyClick = complaint => {\n      console.log(complaint);\n      this.setState({\n        unitName: complaint.EntityDTO.clientName,\n        replyTo: complaint.EntityDTO.replayTo,\n        reply: complaint.EntityDTO.reply,\n        complaintId: complaint.Id,\n        showComplaintModal: true\n      });\n    };\n  }\n\n  componentDidMount() {\n    Axios.get(API_URL + \"/complaint/getComplaintsUser\", {\n      validateStatus: () => true,\n      headers: {\n        Authorization: GetAuthorisation()\n      }\n    }).then(res => {\n      if (res.status === 401) {\n        this.props.history.push('/login');\n      } else {\n        this.setState({\n          complaints: res.data\n        });\n        console.log(res.data);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \" text-center  mb-0 text-uppercase\",\n        style: {\n          marginTop: \"5rem\"\n        },\n        children: \"\\u017Dalbe na vlasnike vikendica i instruktore\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table\",\n        style: {\n          width: \"60%\",\n          marginTop: \"5em\",\n          marginLeft: \"auto\",\n          marginRight: \"auto\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.complaints.map(complaint => /*#__PURE__*/_jsxDEV(\"tr\", {\n            id: complaint.Id,\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              width: \"130em\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"img-fluid\",\n                src: ComplaintImage,\n                width: \"70em\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Klijent: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 41\n                }, this), complaint.EntityDTO.clientName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Osoba na koju se \\u017Eali: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 41\n                }, this), complaint.EntityDTO.userName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Tip korsnika: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 41\n                }, this), complaint.EntityDTO.profession]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Tekst \\u017Ealbe: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 41\n                }, this), complaint.EntityDTO.text]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"align-middle\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginLeft: \"55%\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-outline-secondary btn-block\",\n                  children: \"Reply\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 39\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 39\n            }, this)]\n          }, complaint.Id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 9\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReplyModal, {\n        buttonName: \"Po\\u0161alji\",\n        header: \"Odgovor na \\u017Ealbu\",\n        handleReplyChange: this.handleReplyChange,\n        handleReplyToChange: this.handleReplyToUserChange,\n        show: this.state.showComplaintModal,\n        onCloseModal: this.handleComplaintModalClose,\n        giveFeedback: this.handleReplyComaplaint,\n        name: this.state.unitName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ComplaintUserPage;","map":{"version":3,"sources":["E:/aca/isa/nova-isa-projekat/isa2021/isa-projekat/ISA-front/src/Pages/ComplaintUserPage.js"],"names":["React","Component","Axios","ComplaintImage","Header","GetAuthorisation","API_URL","ComplaintUserPage","state","complaints","ownerName","complaintId","showComplaintModal","handleReplyChange","event","setState","reply","target","value","handleReplyToUserChange","replyTo","handleComplaintModalClose","handleReplyComaplaint","console","log","ComplaintUnitDTO","unitId","replyToUser","alert","post","validateStatus","headers","Authorization","then","resp","status","hiddenFailAlert","failHeader","failMessage","get","res","props","history","push","data","catch","err","handleReplyClick","complaint","unitName","EntityDTO","clientName","replayTo","Id","componentDidMount","render","marginTop","width","marginLeft","marginRight","map","userName","profession","text"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Axios from \"axios\";\r\nimport ComplaintImage from \"../Images/report.png\" ;\r\nimport Header from '../Components/Header';\r\nimport GetAuthorisation from \"../Funciton/GetAuthorisation\";\r\n\r\nconst API_URL = \"http://localhost:8080\"\r\n\r\nclass ComplaintUserPage extends Component {\r\n\r\n\r\n\r\n  state = {\r\n    complaints : [],\r\n    ownerName : \"\",   \r\n    complaintId : \"\",\r\n    showComplaintModal : false,\r\n  \r\n\r\n\r\n};\r\n\r\n\r\n\r\n  componentDidMount() {\r\n\r\n    Axios.get(API_URL + \"/complaint/getComplaintsUser\", {\r\n\t\t\tvalidateStatus: () => true,\r\n\t\t\theaders: { Authorization: GetAuthorisation() },\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res.status === 401) {\r\n          this.props.history.push('/login');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ complaints: res.data });\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\r\n\r\n\r\n  }\r\n\r\n  handleReplyChange = (event) => {\r\n    this.setState({ reply: event.target.value });\r\n};\r\n\r\nhandleReplyToUserChange = (event) => {\r\n    this.setState({ replyTo: event.target.value });\r\n};\r\nhandleComplaintModalClose = () => {\r\n    this.setState({ showComplaintModal: false });\r\n};\r\n\r\nhandleReplyComaplaint = () => {\r\n    console.log(this.state.reply);\r\n    console.log(this.state.replyTo);\r\n    console.log(this.state.complaintId);\r\n\r\n\r\n    let ComplaintUnitDTO = {\r\n        unitId : this.state.complaintId,\r\n        reply : this.state.reply,\r\n        replyToUser : this.state.replyTo,\r\n    \r\n    };\r\n    if(this.state.reply === \"\" || this.state.replyTo ===\"\")\r\n    {\r\n        alert(\"Morate uneti odgovore\")\r\n    }else{\r\n    Axios.post(API_URL+\"/complaint/replyToUnitComplaint\" , ComplaintUnitDTO,  { validateStatus: () => true, headers: { Authorization: GetAuthorisation() } })\r\n        .then((resp) => {\r\n            if (resp.status === 500) {\r\n                this.setState({ hiddenFailAlert: false, failHeader: \"Internal server error\", failMessage: \"Server error.\" });\r\n            } else if (resp.status === 201) {\r\n                \r\n\r\n      Axios.get(API_URL + \"/complaint/getComplaintsUnit\", {\r\n        validateStatus: () => true,\r\n        headers: { Authorization: GetAuthorisation() },\r\n    })\r\n        .then((res) => {\r\n            if (res.status === 401) {\r\n      this.props.history.push('/login');\r\n            } else {\r\n                this.setState({ complaints: res.data });\r\n                console.log(res.data);\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n        });\r\n                \r\n            }\r\n            this.setState({ showComplaintModal: false });\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n        });\r\n    }\r\n};\r\n\r\nhandleReplyClick = (complaint) => {\r\n    console.log(complaint);\r\n    this.setState({\r\n        unitName: complaint.EntityDTO.clientName,\r\n        replyTo : complaint.EntityDTO.replayTo,\r\n        reply : complaint.EntityDTO.reply,\r\n        complaintId : complaint.Id,\r\n        showComplaintModal: true,\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n    render() {\r\n\t\r\n\r\n\t\treturn (\r\n      \r\n      <React.Fragment>\r\n\r\n      <Header/>\r\n\r\n      <h5 className=\" text-center  mb-0 text-uppercase\" style={{ marginTop: \"5rem\" }}>\r\n\t\t\t\t\t\tŽalbe na vlasnike vikendica i instruktore\r\n\t\t\t\t</h5>\r\n\r\n\r\n        <table className=\"table\" style={{ width: \"60%\", marginTop: \"5em\", marginLeft: \"auto\",marginRight: \"auto\" }}>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{this.state.complaints.map((complaint) => (\r\n\t\t\t\t\t\t\t\t<tr id={complaint.Id} key={complaint.Id} >\r\n\t\t\t\t\t\t\t\t\t<td width=\"130em\">\r\n\t\t\t\t\t\t\t\t\t\t<img className=\"img-fluid\" src={ComplaintImage} width=\"70em\" />\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\r\n                  <td>\r\n                                        \r\n                                        <div>  \r\n                                        <b>Klijent: </b>{complaint.EntityDTO.clientName}\r\n                        \r\n                                        </div>\r\n                                        <div>  \r\n                                        <b>Osoba na koju se žali: </b>{complaint.EntityDTO.userName}\r\n                        \r\n                                        </div> \r\n                                        <div>  \r\n                                        <b>Tip korsnika: </b>{complaint.EntityDTO.profession}\r\n                        \r\n                                        </div> \r\n                                        <div>  \r\n                                        <b>Tekst žalbe: </b>{complaint.EntityDTO.text}\r\n                        \r\n                                        </div>  \r\n\r\n                                        \r\n\r\n                                      </td>\r\n\r\n                                      <td className=\"align-middle\">\r\n                                      <div style={{ marginLeft: \"55%\" }}>\r\n                                        <button\r\n                                          type=\"button\"\r\n                                          className=\"btn btn-outline-secondary btn-block\"\r\n                                        >\r\n                                          Reply\r\n                                        </button>\r\n                                      </div>\r\n                                      \r\n                                    </td>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n                    <ReplyModal\r\n\t\t\t\t\tbuttonName=\"Pošalji\"\r\n\t\t\t\t\theader=\"Odgovor na žalbu\"\r\n\t\t\t\t\thandleReplyChange={this.handleReplyChange}\r\n                    handleReplyToChange={this.handleReplyToUserChange}\r\n\t\t\t\t\tshow={this.state.showComplaintModal}\r\n\t\t\t\t\tonCloseModal={this.handleComplaintModalClose}\r\n\t\t\t\t\tgiveFeedback={this.handleReplyComaplaint}\r\n\t\t\t\t\tname={this.state.unitName}\r\n\t\t\t\t/>\r\n     \r\n      </React.Fragment>\r\n        \r\n\t\t);\r\n        }\r\n\r\n}\r\nexport default ComplaintUserPage;"]},"metadata":{},"sourceType":"module"}