{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amijatovic\\\\Desktop\\\\isa\\\\ISA-projekat-main\\\\ISA-front\\\\src\\\\Pages\\\\Appointment\\\\AppointmentReport.js\";\nimport React, { Component } from \"react\";\nimport Header from \"../../Components/Header\";\nimport Axios from \"axios\";\nimport DrugModal from \"../../Components/DrugModal\";\nimport AvailableDrugModal from \"../../Components/AvailableDrugModal\";\nimport { withRouter } from \"react-router\";\nimport GetAuthorisation from '../../Funciton/GetAuthorisation';\nimport { Redirect } from \"react-router-dom\";\nimport ModalDialog from \"../../Components/ModalDialog\";\nimport PrescriptionDrug from \"../../Components/PrescriptionDrug\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:8080\";\n\nclass AppointmentReport extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anamnesis: \"\",\n      diagnosis: \"\",\n      drugs: [],\n      openDrugsModal: false,\n      openDrugDetailsModal: false,\n      drug: {},\n      drugId: \"\",\n      name: \"\",\n      quantity: \"\",\n      openModalSuccess: false,\n      appointment: {},\n      id: \"\",\n      patientId: \"\",\n      redirect: false,\n      redirectUrl: '',\n      drugsPatientIsNotAllergicTo: [],\n      alternativeDrugs: [],\n      openAlternativeDrugsModal: false\n    };\n\n    this.handleModalSuccessClose = () => {\n      this.setState({\n        openModalSuccess: false,\n        redirectUrl: \"/patient-profile/\" + this.state.patientId,\n        redirect: true\n      });\n    };\n\n    this.fetchDrugsPatientIsNotAllergicTo = () => {\n      Axios.get(API_URL + \"/drug/not-allergic/\" + this.state.patientId, {\n        validateStatus: () => true,\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(res => {\n        this.setState({\n          drugsPatientIsNotAllergicTo: res.data\n        });\n        console.log(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleAnamnesisChange = event => {\n      this.setState({\n        anamnesis: event.target.value\n      });\n    };\n\n    this.handleDiagnosisChange = event => {\n      this.setState({\n        diagnosis: event.target.value\n      });\n    };\n\n    this.handleDrugsModalClose = () => {\n      this.setState({\n        openDrugsModal: false\n      });\n    };\n\n    this.handleDrugsModalOpen = () => {\n      this.setState({\n        openDrugsModal: true\n      });\n    };\n\n    this.handleDrugDetailsModalClose = () => {\n      this.setState({\n        openDrugDetailsModal: false\n      });\n    };\n\n    this.handleDrugDetailsModalOpen = () => {\n      this.setState({\n        openDrugDetailsModal: true\n      });\n    };\n\n    this.handleAlternativeDrugsModalClose = () => {\n      this.setState({\n        openAlternativeDrugsModal: false\n      });\n    };\n\n    this.handleAlternativeDrugsModalOpen = () => {\n      this.setState({\n        openAlternativeDrugsModal: true\n      });\n    };\n\n    this.handleSubmit = event => {\n      let therapy = \"drug : number of days\" + \"\\n\";\n      this.state.drugs.forEach((value, index) => {\n        therapy += value.drug.EntityDTO.name + \" : \" + value.amount + \"\\n\";\n      });\n      console.log(therapy);\n      Axios.post(API_URL + \"/appointment-report\", {\n        anamnesis: this.state.anamnesis,\n        diagnosis: this.state.diagnosis,\n        therapy: therapy,\n        appointmentId: this.state.id\n      }, {\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(res => {\n        this.setState({\n          openModalSuccess: true\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n      Axios.put(API_URL + \"/appointment/finish\", {\n        id: this.state.id\n      }, {\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n      /*this.state.drugs.forEach((value, index) => {\n      \tAxios.post(API_URL + \"/drug/reserve-drug-as-employee\",\n      \t\t{ patientId: this.state.patientId, drugInstanceId: value.drug.Id, amount: value.amount},\n      \t\t{headers: { Authorization: GetAuthorisation() }}\n      \t)\n      \t.catch((err) => {\n      \t\tconsole.log(err);\n      \t})\n      \t});*/\n    };\n\n    this.handleDrugDetails = drug => {\n      console.log(drug);\n      this.setState({\n        drugId: drug.Id,\n        drug: drug,\n        name: drug.EntityDTO.drugInstanceName,\n        quantity: drug.EntityDTO.quantity\n      });\n      this.handleAlternativeDrugsModalClose();\n      this.handleDrugsModalClose();\n      this.handleDrugDetailsModalOpen();\n    };\n\n    this.handleAddDrug = drugAmount => {\n      console.log(this.state.drug);\n      this.handleDrugDetailsModalClose();\n      Axios.get(API_URL + \"/drug/available/\" + this.state.drug.Id + \"/\" + drugAmount, {\n        validateStatus: () => true,\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          this.state.drugs.push({\n            drug: this.state.drug,\n            amount: drugAmount\n          });\n          this.state.drugsPatientIsNotAllergicTo = this.state.drugsPatientIsNotAllergicTo.filter(drug => this.state.drug.Id != drug.Id);\n          this.setState(this.state);\n        } else {\n          console.log(res.data);\n          this.setState({\n            alternativeDrugs: []\n          });\n          this.state.drug.EntityDTO.replacingDrugs.forEach(x => this.addAlternativeDrug(x));\n          this.setState(this.state);\n          console.log(this.state.alternativeDrugs);\n          this.handleAlternativeDrugsModalOpen();\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.addAlternativeDrug = x => {\n      let alternative = this.state.drugsPatientIsNotAllergicTo.filter(drug => x.Id == drug.Id);\n      alternative.forEach(x => this.state.alternativeDrugs.push(x));\n    };\n\n    this.handleRemoveTherapyDrug = (e, drug, index) => {\n      console.log(index);\n      this.state.drugs.splice(index, 1);\n      this.state.drugsPatientIsNotAllergicTo.push(drug);\n      this.setState(this.state);\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    this.setState({\n      id: id\n    });\n    Axios.get(API_URL + \"/appointment/\" + id, {\n      validateStatus: () => true,\n      headers: {\n        Authorization: GetAuthorisation()\n      }\n    }).then(res => {\n      if (res.status === 401) {\n        this.setState({\n          redirect: true,\n          redirectUrl: \"/unauthorized\"\n        });\n      } else {\n        console.log(res.data);\n        this.setState({\n          appointment: res.data,\n          patientId: res.data.EntityDTO.patient.Id\n        });\n        this.fetchDrugsPatientIsNotAllergicTo();\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    if (this.state.redirect) return /*#__PURE__*/_jsxDEV(Redirect, {\n      push: true,\n      to: this.state.redirectUrl\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 35\n    }, this);\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        hidden: this.props.hidden,\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          style: {\n            marginTop: \"10%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \" text-center mb-0 mt-2 text-uppercase\",\n            children: \"Treatment report\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Anamnesis\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                class: \"form-control\",\n                value: this.state.anamnesis,\n                onChange: this.handleAnamnesisChange,\n                rows: \"5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Diagnosis\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                class: \"form-control\",\n                value: this.state.diagnosis,\n                onChange: this.handleDiagnosisChange,\n                rows: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group text-left\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                background: \"#1977cc\"\n              },\n              onClick: this.handleDrugsModalOpen,\n              className: \"btn btn-primary btn-1x\",\n              type: \"button\",\n              children: \"Add therapy drug\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            style: {\n              minHeight: \"50px\"\n            },\n            className: \"border border-secondary\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-hover m-0\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: this.state.drugs.map((drug, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  id: drug.Id,\n                  style: {\n                    cursor: \"pointer\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    width: \"130em\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 10\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Name:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 246,\n                        columnNumber: 12\n                      }, this), \" \", drug.drug.EntityDTO.drugInstanceName]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 11\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Quantity:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 249,\n                        columnNumber: 12\n                      }, this), \" \", drug.drug.EntityDTO.quantity, \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"mg\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 249,\n                        columnNumber: 60\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 248,\n                      columnNumber: 11\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Number of days:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 252,\n                        columnNumber: 12\n                      }, this), \" \", drug.amount]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 251,\n                      columnNumber: 11\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 10\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: e => this.handleRemoveTherapyDrug(e, drug.drug, index),\n                      className: \"btn btn-danger btn-1x\",\n                      type: \"button\",\n                      style: {\n                        float: \"right\"\n                      },\n                      children: \"Remove therapy drug\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 10\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 10\n                  }, this)]\n                }, drug.Id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 9\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 7\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 6\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                background: \"#1977cc\",\n                marginTop: \"50px\"\n              },\n              onClick: this.handleSubmit,\n              className: \"btn btn-primary btn-lg\",\n              type: \"button\",\n              children: \"Submit treatment report\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(DrugModal, {\n        show: this.state.openDrugsModal,\n        onCloseModal: this.handleDrugsModalClose,\n        header: \"Pick drug you want to prescribe as therapy\",\n        subheader: \"You can only choose between drugs patient is not allergic to\",\n        handleDrugDetails: this.handleDrugDetails,\n        drugsPatientIsNotAllergicTo: this.state.drugsPatientIsNotAllergicTo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(AvailableDrugModal, {\n        show: this.state.openAlternativeDrugsModal,\n        onCloseModal: this.handleAlternativeDrugsModalClose,\n        header: \"No selected drug in stock, here are some alternatives\",\n        subheader: \"You can choose between alternative drugs\",\n        handleDrugDetails: this.handleDrugDetails,\n        alternativeDrugs: this.state.alternativeDrugs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(PrescriptionDrug, {\n        name: this.state.name,\n        quantity: this.state.quantity,\n        drug: this.state.drug,\n        show: this.state.openDrugDetailsModal,\n        onCloseModal: this.handleDrugDetailsModalClose,\n        header: \"Add drug to patients therapy\",\n        subheader: \"\",\n        handleAddDrug: this.handleAddDrug\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ModalDialog, {\n        show: this.state.openModalSuccess,\n        onCloseModal: this.handleModalSuccessClose,\n        header: \"Successfully submitted treatment report for patient\",\n        text: \"You can schedule another appointment for this patient.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default AppointmentReport;","map":{"version":3,"sources":["C:/Users/amijatovic/Desktop/isa/ISA-projekat-main/ISA-front/src/Pages/Appointment/AppointmentReport.js"],"names":["React","Component","Header","Axios","DrugModal","AvailableDrugModal","withRouter","GetAuthorisation","Redirect","ModalDialog","PrescriptionDrug","API_URL","AppointmentReport","state","anamnesis","diagnosis","drugs","openDrugsModal","openDrugDetailsModal","drug","drugId","name","quantity","openModalSuccess","appointment","id","patientId","redirect","redirectUrl","drugsPatientIsNotAllergicTo","alternativeDrugs","openAlternativeDrugsModal","handleModalSuccessClose","setState","fetchDrugsPatientIsNotAllergicTo","get","validateStatus","headers","Authorization","then","res","data","console","log","catch","err","handleAnamnesisChange","event","target","value","handleDiagnosisChange","handleDrugsModalClose","handleDrugsModalOpen","handleDrugDetailsModalClose","handleDrugDetailsModalOpen","handleAlternativeDrugsModalClose","handleAlternativeDrugsModalOpen","handleSubmit","therapy","forEach","index","EntityDTO","amount","post","appointmentId","put","handleDrugDetails","Id","drugInstanceName","handleAddDrug","drugAmount","status","push","filter","replacingDrugs","x","addAlternativeDrug","alternative","handleRemoveTherapyDrug","e","splice","componentDidMount","props","match","params","patient","render","hidden","marginTop","background","minHeight","map","cursor","float"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Header from \"../../Components/Header\";\nimport Axios from \"axios\";\nimport DrugModal from \"../../Components/DrugModal\";\nimport AvailableDrugModal from \"../../Components/AvailableDrugModal\";\nimport { withRouter } from \"react-router\";\nimport GetAuthorisation from '../../Funciton/GetAuthorisation';\nimport { Redirect } from \"react-router-dom\";\nimport ModalDialog from \"../../Components/ModalDialog\";\nimport PrescriptionDrug from \"../../Components/PrescriptionDrug\";\nconst API_URL=\"http://localhost:8080\";\n\nclass AppointmentReport extends Component {\n\tstate = {\n        anamnesis: \"\",\n        diagnosis: \"\",\n        drugs: [],\n        openDrugsModal: false,\n        openDrugDetailsModal: false,\n\t\tdrug: {},\n\t\tdrugId: \"\",\n        name: \"\",\n\t\tquantity: \"\",\n\t\topenModalSuccess: false,\n\t\tappointment: {},\n\t\tid: \"\",\n\t\tpatientId: \"\",\n\t\tredirect: false,\n\t\tredirectUrl: '',\n\t\tdrugsPatientIsNotAllergicTo: [],\n\t\talternativeDrugs: [],\n\t\topenAlternativeDrugsModal: false,\n\t};\n\n\thandleModalSuccessClose = () => {\n\t\tthis.setState({ openModalSuccess: false, redirectUrl: \"/patient-profile/\" + this.state.patientId, redirect: true });\n\t};\n\n\tfetchDrugsPatientIsNotAllergicTo = () => {\n\t\tAxios.get(API_URL + \"/drug/not-allergic/\" + this.state.patientId, {validateStatus: () => true, headers: { Authorization: GetAuthorisation() }})\n        .then((res) => {\n            this.setState({ drugsPatientIsNotAllergicTo: res.data });\n            console.log(res.data);\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n\t}\n\n\tcomponentDidMount() {\n\t\tconst id = this.props.match.params.id;\n\t\tthis.setState({\n\t\t\tid:id\n\t\t});\n\n\t\tAxios.get(API_URL + \"/appointment/\" + id, \n\t\t\t{validateStatus: () => true, headers: { Authorization: GetAuthorisation() }}\n\t\t)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.status === 401) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tredirect: true,\n\t\t\t\t\t\tredirectUrl: \"/unauthorized\"\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res.data)\n\t\t\t\t\tthis.setState({ appointment: res.data, patientId: res.data.EntityDTO.patient.Id});\n\t\t\t\t\tthis.fetchDrugsPatientIsNotAllergicTo();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t})\n\t}\n\n    handleAnamnesisChange = (event) => {\n\t\tthis.setState({ anamnesis: event.target.value });\n\t};\n\n\thandleDiagnosisChange = (event) => {\n\t\tthis.setState({ diagnosis: event.target.value });\n    };\n\n    handleDrugsModalClose = () => {\n\t\tthis.setState({ openDrugsModal: false });\n    };\n\n    handleDrugsModalOpen = () => {\n\n\t\tthis.setState({ openDrugsModal: true });\n    };\n    \n    handleDrugDetailsModalClose = () => {\n\t\tthis.setState({ openDrugDetailsModal: false });\n    };\n\n    handleDrugDetailsModalOpen = () => {\n\t\tthis.setState({ openDrugDetailsModal: true });\n\t};\n\n\thandleAlternativeDrugsModalClose = () => {\n\t\tthis.setState({ openAlternativeDrugsModal: false });\n    };\n\n    handleAlternativeDrugsModalOpen = () => {\n\n\t\tthis.setState({ openAlternativeDrugsModal: true });\n    };\n    \n    handleSubmit = (event) => {\n\t\tlet therapy = \"drug : number of days\" + \"\\n\";\n\t\tthis.state.drugs.forEach((value, index) => {\n\t\t\ttherapy +=  value.drug.EntityDTO.name + \" : \" + value.amount + \"\\n\";\n\t\t});\n\t\tconsole.log(therapy);\n\n\t\tAxios.post(API_URL + \"/appointment-report\",\n\t\t\t{anamnesis: this.state.anamnesis, diagnosis: this.state.diagnosis, therapy: therapy, appointmentId: this.state.id},\n\t\t\t{headers: { Authorization: GetAuthorisation() }}\n\t\t)\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ openModalSuccess: true});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t})\n\n\t\tAxios.put(API_URL + \"/appointment/finish\",\n\t\t\t{id: this.state.id},\n\t\t\t{headers: { Authorization: GetAuthorisation() }}\n\t\t)\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t})\n\t\t\n\t\t/*this.state.drugs.forEach((value, index) => {\n\t\t\tAxios.post(API_URL + \"/drug/reserve-drug-as-employee\",\n\t\t\t\t{ patientId: this.state.patientId, drugInstanceId: value.drug.Id, amount: value.amount},\n\t\t\t\t{headers: { Authorization: GetAuthorisation() }}\n\t\t\t)\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t})\n\n\t\t});*/\n    };\n\n    handleDrugDetails = (drug) => {\n        console.log(drug); \n        this.setState({\n\t\t\tdrugId: drug.Id,\n            drug: drug,\n            name: drug.EntityDTO.drugInstanceName,\n            quantity: drug.EntityDTO.quantity\n\t\t});\n\t\tthis.handleAlternativeDrugsModalClose(); \n        this.handleDrugsModalClose(); \n        this.handleDrugDetailsModalOpen();\n    };\n\n    handleAddDrug = (drugAmount) => {\n        console.log(this.state.drug); \n\t\tthis.handleDrugDetailsModalClose();\n\t\tAxios.get(API_URL + \"/drug/available/\" + this.state.drug.Id + \"/\" + drugAmount, \n\t\t\t{validateStatus: () => true, headers: { Authorization: GetAuthorisation() }}\n\t\t)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tthis.state.drugs.push({drug: this.state.drug, amount: drugAmount});\n\t\t\t\t\tthis.state.drugsPatientIsNotAllergicTo = this.state.drugsPatientIsNotAllergicTo.filter(drug => this.state.drug.Id != drug.Id);\n\t\t\t\t\tthis.setState(this.state);\t\t\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res.data);\n\t\t\t\t\tthis.setState({alternativeDrugs: []});\n\t\t\t\t\tthis.state.drug.EntityDTO.replacingDrugs.forEach( x => this.addAlternativeDrug(x));\n\t\t\t\t\tthis.setState(this.state);\n\t\t\t\t\tconsole.log(this.state.alternativeDrugs);\n\t\t\t\t\tthis.handleAlternativeDrugsModalOpen();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t})\n\t};\n\n\taddAlternativeDrug = (x) => {\n\t\tlet alternative = this.state.drugsPatientIsNotAllergicTo.filter(drug => x.Id == drug.Id);\n\t\talternative.forEach(x => this.state.alternativeDrugs.push(x));\n\t};\n\t\n\thandleRemoveTherapyDrug = (e, drug, index) => {\n\t\tconsole.log(index)\n\t\tthis.state.drugs.splice(index, 1);\n\t\tthis.state.drugsPatientIsNotAllergicTo.push(drug)\n\t\tthis.setState(this.state);\n\t};\n\n\trender() {\n\n\t\tif (this.state.redirect) return <Redirect push to={this.state.redirectUrl} />;\n\n\t\treturn (\n            <React.Fragment>\n\t\t\t<div hidden={this.props.hidden}>\n\t\t\t\t<Header />\n\n\t\t\t\t<div className=\"container\" style={{ marginTop: \"10%\" }}>\n\t\t\t\t\t<h4 className=\" text-center mb-0 mt-2 text-uppercase\">Treatment report</h4>\n\n                    <form>\n                        <div class=\"form-group\">\n                            <h5>Anamnesis</h5>\n                            <textarea class=\"form-control\" value={this.state.anamnesis} onChange={this.handleAnamnesisChange} rows=\"5\"></textarea>\t\t\n                        </div>\n                        <div class=\"form-group\">\n                            <h5>Diagnosis</h5>\n                            <textarea class=\"form-control\" value={this.state.diagnosis} onChange={this.handleDiagnosisChange} rows=\"3\"></textarea>\n                        </div>\n                    </form>\n\t\t\t\t\t<div className=\"form-group text-left\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tstyle={{ background: \"#1977cc\" }}\n\t\t\t\t\t\t\t\t\t\tonClick={this.handleDrugsModalOpen}\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary btn-1x\"\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tAdd therapy drug\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t    </div>\n\t\t\t\t\t<form style={{minHeight: \"50px\"}} className=\"border border-secondary\">\n\t\t\t\t\t<table\n\t\t\t\t\t\tclassName=\"table table-hover m-0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{this.state.drugs.map((drug, index) => (\n\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\tid={drug.Id}\n\t\t\t\t\t\t\t\t\tkey={drug.Id}\n\t\t\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<td width=\"130em\">\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<b>Name:</b> {drug.drug.EntityDTO.drugInstanceName}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<b>Quantity:</b> {drug.drug.EntityDTO.quantity} <b>mg</b>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<b>Number of days:</b> {drug.amount}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => this.handleRemoveTherapyDrug(e, drug.drug, index)}\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-danger btn-1x\"\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tstyle={{float: \"right\"}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tRemove therapy drug\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t</form>\n                    <div className=\"form-group text-center\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tstyle={{ background: \"#1977cc\", marginTop: \"50px\" }}\n\t\t\t\t\t\t\t\t\t\tonClick={this.handleSubmit}\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary btn-lg\"\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSubmit treatment report\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n            <DrugModal           \n            show={this.state.openDrugsModal}\n            onCloseModal={this.handleDrugsModalClose}\n            header=\"Pick drug you want to prescribe as therapy\"\n            subheader=\"You can only choose between drugs patient is not allergic to\"\n\t\t\thandleDrugDetails={this.handleDrugDetails}\n\t\t\tdrugsPatientIsNotAllergicTo={this.state.drugsPatientIsNotAllergicTo}\n            />\n\t\t\t<AvailableDrugModal            \n            show={this.state.openAlternativeDrugsModal}\n            onCloseModal={this.handleAlternativeDrugsModalClose}\n            header=\"No selected drug in stock, here are some alternatives\"\n            subheader=\"You can choose between alternative drugs\"\n\t\t\thandleDrugDetails={this.handleDrugDetails}\n\t\t\talternativeDrugs={this.state.alternativeDrugs}\n            />\n            <PrescriptionDrug \n            name={this.state.name}\n            quantity={this.state.quantity}\n            drug={this.state.drug}         \n            show={this.state.openDrugDetailsModal}\n            onCloseModal={this.handleDrugDetailsModalClose}\n            header=\"Add drug to patients therapy\"\n            subheader=\"\"\n            handleAddDrug={this.handleAddDrug}\n            />\n\t\t\t<ModalDialog\n\t\t\t\t\tshow={this.state.openModalSuccess}\n\t\t\t\t\tonCloseModal={this.handleModalSuccessClose}\n\t\t\t\t\theader=\"Successfully submitted treatment report for patient\"\n\t\t\t\t\ttext=\"You can schedule another appointment for this patient.\"\n\t\t\t\t/>\n            </React.Fragment>\n\t\t);\n\t}\n}\n\nexport default AppointmentReport;\n"]},"metadata":{},"sourceType":"module"}