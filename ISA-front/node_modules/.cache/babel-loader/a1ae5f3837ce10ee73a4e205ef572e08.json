{"ast":null,"code":"var _jsxFileName = \"E:\\\\aca\\\\isa\\\\nova-isa-projekat\\\\isa2021\\\\isa-projekat\\\\ISA-front\\\\src\\\\Pages\\\\ComplaintUserPage.js\";\nimport React, { Component } from \"react\";\nimport Axios from \"axios\";\nimport ComplaintImage from \"../Images/report.png\";\nimport Header from '../Components/Header';\nimport GetAuthorisation from \"../Funciton/GetAuthorisation\";\nimport ReplyModal from \"../Components/Modal/ReplyModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:8080\";\n\nclass ComplaintUserPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      complaints: [],\n      clientName: \"\",\n      complaintId: \"\",\n      showComplaintModal: false,\n      replyTo: \"\",\n      reply: \"\"\n    };\n\n    this.handleReplyChange = event => {\n      this.setState({\n        reply: event.target.value\n      });\n    };\n\n    this.handleReplyToUserChange = event => {\n      this.setState({\n        replyTo: event.target.value\n      });\n    };\n\n    this.handleComplaintModalClose = () => {\n      this.setState({\n        showComplaintModal: false\n      });\n    };\n\n    this.handleReplyComaplaint = () => {\n      console.log(this.state.reply);\n      console.log(this.state.replyTo);\n      console.log(this.state.complaintId);\n      let ComplaintUserDTO = {\n        userId: this.state.complaintId,\n        reply: this.state.reply,\n        replyToUser: this.state.replyTo\n      };\n\n      if (this.state.reply === \"\" || this.state.replyTo === \"\") {\n        alert(\"Morate uneti odgovore\");\n      } else {\n        Axios.post(API_URL + \"/complaint/replyToUserComplaint\", ComplaintUserDTO, {\n          validateStatus: () => true,\n          headers: {\n            Authorization: GetAuthorisation()\n          }\n        }).then(resp => {\n          if (resp.status === 500) {\n            this.setState({\n              hiddenFailAlert: false,\n              failHeader: \"Internal server error\",\n              failMessage: \"Server error.\"\n            });\n          } else if (resp.status === 201) {\n            Axios.get(API_URL + \"/complaint/getComplaintsUser\", {\n              validateStatus: () => true,\n              headers: {\n                Authorization: GetAuthorisation()\n              }\n            }).then(res => {\n              if (res.status === 401) {\n                this.props.history.push('/login');\n              } else {\n                this.setState({\n                  complaints: res.data\n                });\n                console.log(res.data);\n              }\n            }).catch(err => {\n              console.log(err);\n            });\n          }\n\n          this.setState({\n            showComplaintModal: false\n          });\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    };\n\n    this.handleReplyClick = complaint => {\n      console.log(complaint);\n      this.setState({\n        clientName: complaint.EntityDTO.clientName,\n        replyTo: complaint.EntityDTO.replayTo,\n        reply: complaint.EntityDTO.reply,\n        complaintId: complaint.Id,\n        showComplaintModal: true\n      });\n    };\n  }\n\n  componentDidMount() {\n    Axios.get(API_URL + \"/complaint/getComplaintsUser\", {\n      validateStatus: () => true,\n      headers: {\n        Authorization: GetAuthorisation()\n      }\n    }).then(res => {\n      if (res.status === 401) {\n        this.props.history.push('/login');\n      } else {\n        this.setState({\n          complaints: res.data\n        });\n        console.log(res.data);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \" text-center  mb-0 text-uppercase\",\n        style: {\n          marginTop: \"5rem\"\n        },\n        children: \"\\u017Dalbe na vlasnike vikendica i instruktore\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table\",\n        style: {\n          width: \"60%\",\n          marginTop: \"5em\",\n          marginLeft: \"auto\",\n          marginRight: \"auto\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.complaints.map(complaint => /*#__PURE__*/_jsxDEV(\"tr\", {\n            id: complaint.Id,\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              width: \"130em\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"img-fluid\",\n                src: ComplaintImage,\n                width: \"70em\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Klijent: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 41\n                }, this), complaint.EntityDTO.clientName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Osoba na koju se \\u017Eali: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 41\n                }, this), complaint.EntityDTO.userName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Tip korsnika: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 41\n                }, this), complaint.EntityDTO.profession]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Tekst \\u017Ealbe: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 41\n                }, this), complaint.EntityDTO.text]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"align-middle\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginLeft: \"55%\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-outline-secondary btn-block\",\n                  onClick: () => this.handleReplyClick(complaint),\n                  children: \"Reply\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 39\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 39\n            }, this)]\n          }, complaint.Id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 9\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReplyModal, {\n        buttonName: \"Po\\u0161alji\",\n        header: \"Odgovor na \\u017Ealbu\",\n        handleReplyChange: this.handleReplyChange,\n        handleReplyToChange: this.handleReplyToUserChange,\n        show: this.state.showComplaintModal,\n        onCloseModal: this.handleComplaintModalClose,\n        giveFeedback: this.handleReplyComaplaint,\n        name: this.state.clientName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ComplaintUserPage;","map":{"version":3,"sources":["E:/aca/isa/nova-isa-projekat/isa2021/isa-projekat/ISA-front/src/Pages/ComplaintUserPage.js"],"names":["React","Component","Axios","ComplaintImage","Header","GetAuthorisation","ReplyModal","API_URL","ComplaintUserPage","state","complaints","clientName","complaintId","showComplaintModal","replyTo","reply","handleReplyChange","event","setState","target","value","handleReplyToUserChange","handleComplaintModalClose","handleReplyComaplaint","console","log","ComplaintUserDTO","userId","replyToUser","alert","post","validateStatus","headers","Authorization","then","resp","status","hiddenFailAlert","failHeader","failMessage","get","res","props","history","push","data","catch","err","handleReplyClick","complaint","EntityDTO","replayTo","Id","componentDidMount","render","marginTop","width","marginLeft","marginRight","map","userName","profession","text"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Axios from \"axios\";\r\nimport ComplaintImage from \"../Images/report.png\" ;\r\nimport Header from '../Components/Header';\r\nimport GetAuthorisation from \"../Funciton/GetAuthorisation\";\r\nimport ReplyModal from \"../Components/Modal/ReplyModal\"\r\n\r\nconst API_URL = \"http://localhost:8080\"\r\n\r\nclass ComplaintUserPage extends Component {\r\n\r\n\r\n\r\n  state = {\r\n    complaints : [],\r\n    clientName : \"\",\r\n    complaintId : \"\",\r\n    showComplaintModal : false,\r\n    replyTo:\"\",\r\n    reply:\"\"\r\n\r\n\r\n};\r\n\r\n\r\n\r\n  componentDidMount() {\r\n\r\n    Axios.get(API_URL + \"/complaint/getComplaintsUser\", {\r\n\t\t\tvalidateStatus: () => true,\r\n\t\t\theaders: { Authorization: GetAuthorisation() },\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res.status === 401) {\r\n          this.props.history.push('/login');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ complaints: res.data });\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\r\n\r\n\r\n  }\r\n\r\n  handleReplyChange = (event) => {\r\n    this.setState({ reply: event.target.value });\r\n};\r\n\r\nhandleReplyToUserChange = (event) => {\r\n    this.setState({ replyTo: event.target.value });\r\n};\r\nhandleComplaintModalClose = () => {\r\n    this.setState({ showComplaintModal: false });\r\n};\r\n\r\nhandleReplyComaplaint = () => {\r\n    console.log(this.state.reply);\r\n    console.log(this.state.replyTo);\r\n    console.log(this.state.complaintId);\r\n\r\n\r\n    let ComplaintUserDTO = {\r\n        userId : this.state.complaintId,\r\n        reply : this.state.reply,\r\n        replyToUser : this.state.replyTo,\r\n    \r\n    };\r\n    if(this.state.reply === \"\" || this.state.replyTo ===\"\")\r\n    {\r\n        alert(\"Morate uneti odgovore\")\r\n    }else{\r\n    Axios.post(API_URL+\"/complaint/replyToUserComplaint\" , ComplaintUserDTO,  { validateStatus: () => true, headers: { Authorization: GetAuthorisation() } })\r\n        .then((resp) => {\r\n            if (resp.status === 500) {\r\n                this.setState({ hiddenFailAlert: false, failHeader: \"Internal server error\", failMessage: \"Server error.\" });\r\n            } else if (resp.status === 201) {\r\n                \r\n\r\n      Axios.get(API_URL + \"/complaint/getComplaintsUser\", {\r\n        validateStatus: () => true,\r\n        headers: { Authorization: GetAuthorisation() },\r\n    })\r\n        .then((res) => {\r\n            if (res.status === 401) {\r\n      this.props.history.push('/login');\r\n            } else {\r\n                this.setState({ complaints: res.data });\r\n                console.log(res.data);\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n        });\r\n                \r\n            }\r\n            this.setState({ showComplaintModal: false });\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n        });\r\n    }\r\n};\r\n\r\nhandleReplyClick = (complaint) => {\r\n    console.log(complaint);\r\n    this.setState({\r\n        clientName: complaint.EntityDTO.clientName,\r\n        replyTo : complaint.EntityDTO.replayTo,\r\n        reply : complaint.EntityDTO.reply,\r\n        complaintId : complaint.Id,\r\n        showComplaintModal: true,\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n    render() {\r\n\t\r\n\r\n\t\treturn (\r\n      \r\n      <React.Fragment>\r\n\r\n      <Header/>\r\n\r\n      <h5 className=\" text-center  mb-0 text-uppercase\" style={{ marginTop: \"5rem\" }}>\r\n\t\t\t\t\t\tŽalbe na vlasnike vikendica i instruktore\r\n\t\t\t\t</h5>\r\n\r\n\r\n        <table className=\"table\" style={{ width: \"60%\", marginTop: \"5em\", marginLeft: \"auto\",marginRight: \"auto\" }}>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{this.state.complaints.map((complaint) => (\r\n\t\t\t\t\t\t\t\t<tr id={complaint.Id} key={complaint.Id} >\r\n\t\t\t\t\t\t\t\t\t<td width=\"130em\">\r\n\t\t\t\t\t\t\t\t\t\t<img className=\"img-fluid\" src={ComplaintImage} width=\"70em\" />\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\r\n                  <td>\r\n                                        \r\n                                        <div>  \r\n                                        <b>Klijent: </b>{complaint.EntityDTO.clientName}\r\n                        \r\n                                        </div>\r\n                                        <div>  \r\n                                        <b>Osoba na koju se žali: </b>{complaint.EntityDTO.userName}\r\n                        \r\n                                        </div> \r\n                                        <div>  \r\n                                        <b>Tip korsnika: </b>{complaint.EntityDTO.profession}\r\n                        \r\n                                        </div> \r\n                                        <div>  \r\n                                        <b>Tekst žalbe: </b>{complaint.EntityDTO.text}\r\n                        \r\n                                        </div>  \r\n\r\n                                        \r\n\r\n                                      </td>\r\n\r\n                                      <td className=\"align-middle\">\r\n                                      <div style={{ marginLeft: \"55%\" }}>\r\n                                        <button\r\n                                          type=\"button\"\r\n                                          className=\"btn btn-outline-secondary btn-block\"\r\n                                          onClick={() => this.handleReplyClick(complaint)}\r\n                                        >\r\n                                          Reply\r\n                                        </button>\r\n                                      </div>\r\n                                      \r\n                                    </td>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n                    <ReplyModal\r\n\t\t\t\t\tbuttonName=\"Pošalji\"\r\n\t\t\t\t\theader=\"Odgovor na žalbu\"\r\n\t\t\t\t\thandleReplyChange={this.handleReplyChange}\r\n                    handleReplyToChange={this.handleReplyToUserChange}\r\n\t\t\t\t\tshow={this.state.showComplaintModal}\r\n\t\t\t\t\tonCloseModal={this.handleComplaintModalClose}\r\n\t\t\t\t\tgiveFeedback={this.handleReplyComaplaint}\r\n\t\t\t\t\tname={this.state.clientName}\r\n\t\t\t\t/>\r\n     \r\n      </React.Fragment>\r\n        \r\n\t\t);\r\n        }\r\n\r\n}\r\nexport default ComplaintUserPage;"]},"metadata":{},"sourceType":"module"}